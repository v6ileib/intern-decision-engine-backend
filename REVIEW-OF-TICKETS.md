In general, I found the initial code to be quite well written, in the sense that it was understandable and not messy, but the design obviously needed restructuring. 
The code itself was a basic version of a decision engine and error handling was quite minimal.
The biggest shortcoming was in my opinion placing all the logic into the controller.